
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            UPDATED PREDICT_MUTATION.PY - QUICK REFERENCE                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NEW COMMAND-LINE INTERFACE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Basic Syntax:
  python predict_mutation.py \
    --model <model_dir> \
    --fasta <fasta_file> \
    --output <output_dir> \
    --position <POS> \
    --base <BASE>

All paths are optional. Defaults to current directory.

ARGUMENTS:
  --model      Path to model directory (default: current dir)
  --fasta      Path to FASTA file (default: NM_000138.5.fasta)
  --output     Path to output directory (optional, creates if needed)
  --position   1-indexed position [REQUIRED]
  --base       A|C|G|T [REQUIRED]
  --json       Output JSON format (optional)

QUICK EXAMPLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  Simplest (current directory):
  $ python predict_mutation.py --position 8606 --base C

2ï¸âƒ£  Custom model location:
  $ python predict_mutation.py \
      --model /ml/models \
      --position 8606 --base C

3ï¸âƒ£  Custom model + FASTA:
  $ python predict_mutation.py \
      --model /ml/models \
      --fasta /data/fbn1.fasta \
      --position 8606 --base C

4ï¸âƒ£  Save to output directory:
  $ python predict_mutation.py \
      --model /ml/models \
      --fasta /data/fbn1.fasta \
      --output /results \
      --position 8606 --base C

5ï¸âƒ£  All options + JSON:
  $ python predict_mutation.py \
      --model /ml/models \
      --fasta /data/fbn1.fasta \
      --output /results \
      --position 8606 \
      --base C \
      --json

6ï¸âƒ£  Get help:
  $ python predict_mutation.py --help

WORKFLOW: BATCH PREDICTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Bash script example:

#!/bin/bash

MODEL=/ml/fbn1_models
FASTA=/data/fbn1.fasta
OUTPUT=/results/predictions

mkdir -p $OUTPUT

# Predict multiple mutations
for mutation in "8606,C" "8595,C" "8579,G" "1000,A"; do
  POS=$(echo $mutation | cut -d, -f1)
  BASE=$(echo $mutation | cut -d, -f2)

  python predict_mutation.py \
    --model $MODEL \
    --fasta $FASTA \
    --output $OUTPUT \
    --position $POS \
    --base $BASE \
    --json
done

echo "Done! Results in $OUTPUT"

PYTHON API: Using in Code
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

from predict_mutation import PredictionPipeline

# Initialize with custom paths
pipeline = PredictionPipeline(
    model_dir='/ml/models',
    fasta_file='/data/fbn1.fasta'
)

# Single prediction
result = pipeline.predict(8606, 'C')
print(result['prediction'])    # 'Benign'
print(result['confidence'])    # 0.1578

# Batch predictions
mutations = [(8606, 'C'), (8595, 'C'), (1000, 'A')]
results = [pipeline.predict(pos, base) for pos, base in mutations]

# Save to CSV
import pandas as pd
df = pd.DataFrame(results)
df.to_csv('predictions.csv')

FILE STRUCTURE REQUIRED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Model directory (--model /path):
  â”œâ”€â”€ svm_mutation_classifier.pkl
  â”œâ”€â”€ tfidf_vectorizer.pkl
  â””â”€â”€ label_encoder.pkl

FASTA file (--fasta /path):
  â””â”€â”€ NM_000138.5.fasta (or any reference sequence)

Output directory (--output /path):
  Created automatically, contains:
  â””â”€â”€ prediction_8606_C_20251201_112345.json

ERROR QUICK FIXES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

"Model directory not found"
  â†’ Check path exists: ls /path/to/models
  â†’ Verify .pkl files: ls /path/to/models/*.pkl

"FASTA file not found"
  â†’ Check path: ls /path/to/fasta.fasta
  â†’ Use absolute path: /home/user/data/fbn1.fasta

"Position out of range"
  â†’ Position must be 1-11609
  â†’ Use --help to verify

"Reference already has C"
  â†’ New base must differ from reference
  â†’ Try different base (A, G, T)

"Permission denied"
  â†’ Change permissions: chmod +x predict_mutation.py
  â†’ Or: python3 predict_mutation.py

OUTPUT EXAMPLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Formatted Output (default):
  ======================================================================
  MUTATION SEVERITY PREDICTION
  ======================================================================

  Mutation: Position 8606, T â†’ C

  âœ“ Prediction: Benign
    Confidence: 0.1578

    Probability breakdown:
      Uncertain significance        0.2532  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
      Pathogenic                    0.2200  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
      Likely pathogenic             0.1946  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
      Likely benign                 0.1743  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
      Benign                        0.1578  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘

JSON Output (--json):
  {
    "position": 8606,
    "original_base": "T",
    "new_base": "C",
    "prediction": "Benign",
    "confidence": 0.1578,
    "probabilities": {
      "Benign": 0.1578,
      "Likely benign": 0.1743,
      "Uncertain significance": 0.2532,
      "Likely pathogenic": 0.1946,
      "Pathogenic": 0.22
    }
  }

ENVIRONMENT SETUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Install dependencies:
  $ pip install scikit-learn joblib numpy pandas

Check installation:
  $ python -c "from predict_mutation import PredictionPipeline; print('OK')"

Make script executable:
  $ chmod +x predict_mutation.py

Run tests:
  $ python predict_mutation.py --help
  $ python predict_mutation.py --position 8606 --base C

INTEGRATION EXAMPLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

In notebook:
  import subprocess
  import json

  result = subprocess.run([
    'python', 'predict_mutation.py',
    '--model', '/ml/models',
    '--position', '8606',
    '--base', 'C',
    '--json'
  ], capture_output=True, text=True)

  data = json.loads(result.stdout)
  print(data['prediction'])

In pipeline:
  for mutation in mutation_list:
    cmd = f"python predict_mutation.py --model {{MODEL}} --position {{mutation.pos}} --base {{mutation.base}} --output {{OUTPUT}} --json"
    subprocess.run(cmd, shell=True)

TROUBLESHOOTING CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Before running:
  â–¡ Model files present: ls {model_dir}/*.pkl
  â–¡ FASTA file exists: ls {fasta_file}
  â–¡ Python 3.7+: python --version
  â–¡ Dependencies: pip list | grep scikit
  â–¡ Output dir writable: touch {output_dir}/test.txt
  â–¡ Position range: 1 â‰¤ position â‰¤ 11609
  â–¡ Base is A/C/G/T: not same as reference

Script files:
  â–¡ predict_mutation_v2.py exists
  â–¡ predict_mutation_v2.py is executable: chmod +x
  â–¡ No syntax errors: python -m py_compile predict_mutation_v2.py

CHANGELOG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Version 2.0 (Updated):
  âœ“ Added --model argument (custom model directory)
  âœ“ Added --fasta argument (custom FASTA path)
  âœ“ Added --output argument (result directory)
  âœ“ Timestamped output files
  âœ“ JSON file export
  âœ“ Better error handling
  âœ“ Comprehensive help text

Backward Compatible:
  âœ“ All arguments optional
  âœ“ Works with defaults
  âœ“ Same API for Python

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           Happy predicting! ğŸ§¬
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
